function convertToPoint(n){let t={x:0,y:0};return n[0]!==undefined&&n[1]!==undefined?(t.x=n[1],t.y=n[0],t):n}function convertPointTo2000(n){return[n.y,n.x]}function convertListPointTo2000(n){let t=[];for(let i=0;i<n.length;i++)t.push(convertPointTo2000(n[i]));return t}function duongThangQua2Diem(n,t){let i=convertToPoint(n),r=convertToPoint(t),u=r.y-i.y,f=i.x-r.x,e=u*i.x+f*i.y;return{a:u+0,b:f+0,c:e+0}}function giaoHaiDuong(n,t){let i=n.a*t.b-t.a*n.b,r=n.c*t.b-t.c*n.b,u=n.a*t.c-t.a*n.c;return i===0?!1:{x:r/i+0,y:u/i+0}}function gocDinhHuongVector(n){return n.x===0&&n.y>0?Math.PI/2:n.x===0&&n.y<0?3*Math.PI/2:n.y===0&&n.x>0?0:n.y===0&&n.x<0?Math.PI:n.x>0&&n.y>0?Math.atan(Math.abs(n.y/n.x)):n.x<0&&n.y>0?Math.PI-Math.atan(Math.abs(n.y/n.x)):n.x<0&&n.y<0?Math.PI+Math.atan(Math.abs(n.y/n.x)):n.x>0&&n.y<0?2*Math.PI-Math.atan(Math.abs(n.y/n.x)):void 0}function giaoHoiHuong(n,t,i,r){let u=convertToPoint(n),f=convertToPoint(t),e=convertToPoint(i),o=convertToPoint(r),s=duongThangQua2Diem(u,f),h=duongThangQua2Diem(e,o);return[giaoHaiDuong(s,h)]}function giaoHoiThuanTheoCanh(n,t,i,r){let p=convertToPoint(n),w=convertToPoint(i),b=p.x,k=p.y,f=t,g=w.x,nt=w.y,h=r,e,o,s,u,l,c,a,v,y;if((o=g-b,s=nt-k,u=Math.sqrt(s*s+o*o),u>f+h)||u<Math.abs(f-h))return!1;e=(f*f-h*h+u*u)/(2*u);v=b+o*e/u;y=k+s*e/u;l=Math.sqrt(f*f-e*e);c=-s*(l/u);a=o*(l/u);let tt=v+c,it=v-c,rt=y+a,ut=y-a,d={x:tt,y:rt},ft={x:it,y:ut};return c===0?[d]:[d,ft]}function giaoHoiDocTheoCanh(n,t,i,r=false){let f=convertToPoint(n),e=convertToPoint(t),u={x:e.x-f.x,y:e.y-f.y};if(u.x===0&&u.y===0)return!1;AB=Math.sqrt(u.x*u.x+u.y*u.y);let o=i;r&&(o=AB+i);let s=o/AB,h={x:u.x*s,y:u.y*s};return[{x:f.x+h.x,y:f.y+h.y}]}function giaoHoiCachDuongThang(n,t,i,r,u,f){let e=duongThangQua2Diem(n,t),o=duongThangQua2Diem(i,r),s=Math.sqrt(e.a*e.a+e.b*e.b),h=Math.sqrt(o.a*o.a+o.b*o.b),c={a:e.a,b:e.b,c:s*u+e.c},l={a:e.a,b:e.b,c:s*u*-1+e.c},a={a:o.a,b:o.b,c:h*f+o.c},v={a:o.a,b:o.b,c:h*f*-1+o.c},y=giaoHaiDuong(c,a),p=giaoHaiDuong(c,v),w=giaoHaiDuong(l,a),b=giaoHaiDuong(l,v);return y?[y,p,w,b]:!1}function giaoHoiThuanTheoGoc(n,t,i,r){let f=convertToPoint(n),e=convertToPoint(t);if(i+r>=Math.PI)return!1;let u={x:e.x-f.x,y:e.y-f.y};AB=Math.sqrt(u.x*u.x+u.y*u.y);let o=Math.sin(r)*AB/Math.sin(i+r),s=Math.sin(i)*AB/Math.sin(i+r),h=f.x+o*Math.cos(gocDinhHuongVector(u)-i),c=f.y+o*Math.sin(gocDinhHuongVector(u)-i),l=e.x+s*Math.cos(gocDinhHuongVector(u)+Math.PI+r),a=e.y+s*Math.sin(gocDinhHuongVector(u)+Math.PI+r),v={x:(h+l)/2,y:(c+a)/2},y=f.x+o*Math.cos(gocDinhHuongVector(u)+i),p=f.y+o*Math.sin(gocDinhHuongVector(u)+i),w=e.x+s*Math.cos(gocDinhHuongVector(u)+Math.PI-r),b=e.y+s*Math.sin(gocDinhHuongVector(u)+Math.PI-r),k={x:(y+w)/2,y:(p+b)/2};return[v,k]}function giaoHoiNghich2GocNho(n,t,i,r,u){let y=convertToPoint(n),s=convertToPoint(t),p=convertToPoint(i),w={x:y.x-s.x,y:y.y-s.y},b={x:p.x-s.x,y:p.y-s.y},k=doanThang(n,t),d=doanThang(t,i),h=gocDiemGiua(n,t,i);if(h===0)return!1;let c=2*Math.PI-h-r-u;if(c<=0)return!1;let e,g=k*Math.sin(u)/(d*Math.sin(r)),nt=2*Math.atan(Math.tan(c/2)*(1-g)/(g+1)),a=(c+nt)/2,v=(c-nt)/2,tt=Math.PI-r-a,it=Math.PI-u-v,o=gocDinhHuongVector(b)-gocDinhHuongVector(w);if(o<=-Math.PI||0<o&&o<=Math.PI){let r=giaoHoiThuanTheoGoc(n,t,a,tt)[0],u=giaoHoiThuanTheoGoc(t,i,it,v)[0];e={x:(r.x+u.x)/2,y:(r.y+u.y)/2}}if(o>Math.PI||0>o&&o>-Math.PI){let r=giaoHoiThuanTheoGoc(n,t,a,tt)[1],u=giaoHoiThuanTheoGoc(t,i,it,v)[1];e={x:(r.x+u.x)/2,y:(r.y+u.y)/2}}let rt=gocDiemGiua(n,e,t),ut=gocDiemGiua(t,e,i),ft=Math.abs(rt-r),et=Math.abs(ut-u),l=Math.PI/36;(ft>l||et>l)&&(e=!1);let f,ot=2*Math.PI-h;if(r+u<=h){let e=2*Math.PI-ot-r-u;if(e<=0)f=!1;else{let c=k*Math.sin(u)/(d*Math.sin(r)),l=2*Math.atan(Math.tan(e/2)*(1-c)/(c+1)),s=(e+l)/2,h=(e-l)/2,a=Math.PI-r-s,v=Math.PI-u-h,o=gocDinhHuongVector(b)-gocDinhHuongVector(w);if(o<=-Math.PI||0<o&&o<=Math.PI){let r=giaoHoiThuanTheoGoc(n,t,s,a)[1],u=giaoHoiThuanTheoGoc(t,i,v,h)[1];f={x:(r.x+u.x)/2,y:(r.y+u.y)/2}}if(o>Math.PI||0>o&&o>-Math.PI){let r=giaoHoiThuanTheoGoc(n,t,s,a)[0],u=giaoHoiThuanTheoGoc(t,i,v,h)[0];f={x:(r.x+u.x)/2,y:(r.y+u.y)/2}}}}else f=!1;if(f){let e=gocDiemGiua(n,f,t),o=gocDiemGiua(t,f,i),s=Math.abs(e-r),h=Math.abs(o-u);(s>l||h>l)&&(f=!1)}return e&&f?[e,f]:e?[e]:f?[f]:!1}function giaoHoiNghich(n,t,i,r,u){let e=giaoHoiNghich2GocNho(t,n,i,r,u),f=!1;return(u>r&&(f=giaoHoiNghich2GocNho(n,t,i,r,u-r)),u<r&&(f=giaoHoiNghich2GocNho(t,i,n,r-u,u)),e&&f)?e.concat(f):e?e:f?f:!1}function vector(n,t){let i=convertToPoint(n),r=convertToPoint(t);return{x:r.x-i.x,y:r.y-i.y}}function doanThang(n,t){let i=vector(n,t);return Math.sqrt(i.x*i.x+i.y*i.y)}function gocTamGiac(n,t,i){let e=convertToPoint(n),o=convertToPoint(t),s=convertToPoint(i),f=gocDiemGiua(n,t,i),r=gocDiemGiua(i,n,t),u=Math.PI-r-u;return[r,f,u]}function gocDiemGiua(n,t,i){let u=vector(t,i),f=vector(t,n),r=Math.abs(gocDinhHuongVector(u)-gocDinhHuongVector(f));return r>Math.PI&&(r=2*Math.PI-r),r}