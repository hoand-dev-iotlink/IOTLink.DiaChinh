var MenuLeft={GLOBAL:{ListPolylineMenu:null,idSelect:null,checkSelectAll:!1},CONSTS:{parentIdDefault:"64"},SELECTORS:{menuList:"#menu-list"},init:function(){MenuLeft.loadMenu();MenuLeft.setEvent()},setEvent:function(){$(".tatMenuLeft").click(function(){$(".menu-district").removeClass("open-menu").addClass("close-menu");$("#map").removeClass("defective").addClass("full")});$("#show-sidebar").click(function(){$(".menu-district").removeClass("close-menu").addClass("open-menu");$("#map").removeClass("full").addClass("defective")});$(document).on("click",".has-children, .has-children-child",function(n,t){var e,o,u,s,h,f,c;let r=$(this).attr("data-id"),l=$(this).attr("data-kind"),i=$(this).attr("data-code");typeof i!==undefined&&i.length>2?ViewMap.CONSTS.codeDefault!=i||MenuLeft.GLOBAL.checkSelectAll?(i.length>9&&(setTimeout(function(){map.setTileFeatureFilterCode(i);ViewMap.CONSTS.codeDefault=i;ViewMap.showHideViewProperty(!1)},1),MenuLeft.GLOBAL.idSelect!=null&&MenuLeft.GLOBAL.idSelect!=""&&(e=document.getElementById(MenuLeft.GLOBAL.idSelect),e.style.background=""),$("[data-code="+ViewMap.CONSTS.codeDefault+"]").css("background",""),$(".has-all-map").css("background",""),o=document.getElementById(r),o.style.background="rgba(33, 152, 241, 0.3)",MenuLeft.GLOBAL.idSelect=r,UpdateUrl(null,null,null,i,null,null)),u="icon-"+r,l=="parent"&&(s=document.getElementById(u),h=s.className,h=="fa fa-chevron-down"?($("#"+u).removeClass("fa fa-chevron-down").addClass("fa fa-chevron-left"),$("#child-"+r).css("display","none")):($("#"+u).removeClass("fa fa-chevron-left").addClass("fa fa-chevron-down"),f="#child-"+r,c="child-"+r,$(f).removeAttr("style"),document.getElementById(c).innerHTML==""&&i.length<=9&&setTimeout(function(){MenuLeft.showDistrictChild(r,f)},1))),t==undefined&&setTimeout(function(){MenuLeft.fitBoundPlaceSelect(i)},200),ViewMap.removeSelectThuaDat(),MenuLeft.GLOBAL.checkSelectAll=!1):setTimeout(function(){($("[data-code="+i+"]")[0].attributes.style==undefined||$("[data-code="+i+"]")[0].attributes.style.value=="")&&map.setTileFeatureFilterCode(i);$("[data-code="+i+"]").css("background","rgba(33, 152, 241, 0.3)");$(".has-all-map").css("background","")},1):($(".has-children").css("background",""),$(".has-all-map").css("background","rgba(33, 152, 241, 0.3)"),map.setTileFeatureFilterCode("all"),t==undefined&&(RemoveUrlCode(),ViewMap.showHideViewProperty(!1)),ViewMap.removeSelectThuaDat(),MenuLeft.GLOBAL.checkSelectAll=!0)})},loadMenu:function(){$.ajax({type:"GET",url:ViewMap.GLOBAL.url+"/v2/api/admin-level/children",data:{parentId:MenuLeft.CONSTS.parentIdDefault,key:ViewMap.CONSTS.key},beforeSend:function(){ViewMap.showLoading(!0)},success:function(n){if(console.log(n),n.code=="ok"&&n.result!=null&&n.result.length>0){let i="",r="";for(var t=0;t<n.result.length;t++)i+=`<li class="has-children" id="${n.result[t].id}" data-id="${n.result[t].id}" data-code="${n.result[t].code}" data-kind="parent">
                                    <input type="checkbox" class="input-checkbox" data-id="${n.result[t].id}">
                                    <label id="label-menu-left">${n.result[t].description} ${n.result[t].name}`,n.result[t].code.length<=9?i+=`<i class="fa fa-chevron-left" id="icon-${n.result[t].id}" style="padding-left:12px; float:right;"></i>`:(i+=`<i class="fa fa-chevron-left" id="icon-${n.result[t].id}" style="padding-left:12px; float:right;display:none;"></i>`,r+=`<option value="${n.result[t].code}">
                                        ${n.result[t].description} ${n.result[t].name}
                                    </option>`),i+=`</label>
                                </li>
                                <ul id="child-${n.result[t].id}" class="cd-accordion-menu-child"  style="display:none;"></ul>`,n.result[t].code==ViewMap.CONSTS.codeDefault&&(MenuLeft.GLOBAL.idSelect=n.result[t].id);$(MenuLeft.SELECTORS.menuList).append(i);$(ViewMap.SELECTORS.lstSelectSearch).append(r);let u=ViewMap.SELECTORS.lstSelectSearch+` option[value=${ViewMap.CONSTS.codeDefault}]`;$(u).attr("selected","selected");$("[data-code="+ViewMap.CONSTS.codeDefault+"]").css("background","rgba(33, 152, 241, 0.3)")}else swal({title:"Thông báo",text:"Lỗi! Không lấy được dữ liệu địa chính",icon:"error",button:"Đóng"}).then(()=>{});ViewMap.showLoading(!1)},error:function(n,t,i){let r=AppCommon.getMessageErrorReuqest(n,i);console.log(r);ViewMap.showLoading(!1)}})},fitBoundPlaceSelect:function(n){$.ajax({type:"GET",url:ViewMap.GLOBAL.url+"/v2/api/admin-level/code",data:{code:n,key:ViewMap.CONSTS.key},success:function(n){var t,i,r,u;if(console.log(n),n.code=="ok"&&n.result!=null&&n.result!=null&&n.result.features.length>0){let f=new map4d.LatLngBounds;for(t=0;t<n.result.features[0].geometry.coordinates.length;t++)for(i=0;i<n.result.features[0].geometry.coordinates[t].length;i++)for(r=0;r<n.result.features[0].geometry.coordinates[t][i].length;r++)f.extend(n.result.features[0].geometry.coordinates[t][i][r]);map.fitBounds(f,{top:10,bottom:10,left:10,right:10},null);u=map.getCamera();let e={target:u.target,zoom:16};map.moveCamera(e)}else swal({title:"Thông báo",text:"Không lấy được dữ liệu địa chính",icon:"error",button:"Đóng"}).then(()=>{})},error:function(n,t,i){let r=AppCommon.getMessageErrorReuqest(n,i);console.log(r);ViewMap.showLoading(!1)}})},showDistrictChild:function(n,t){$.ajax({type:"GET",url:ViewMap.GLOBAL.url+"/v2/api/admin-level/children","async":!0,data:{parentId:n,key:ViewMap.CONSTS.key},success:function(n){if(console.log(n),n.code=="ok"&&n.result!=null&&n.result.length>0){let r="";for(var i=0;i<n.result.length;i++)r+=`<li class="has-children-child" id="${n.result[i].id}" data-id="${n.result[i].id}" data-code="${n.result[i].code}" data-kind="child">
                                                <input type="checkbox" class="input-checkbox" data-id="${n.result[i].id}">
                                                 <label id="label-menu-left">${n.result[i].description} ${n.result[i].name}</label>
                                            </li>`;$(t).append(r)}else document.getElementById(iconid).style.display="none",$("#"+id).attr("data-kind","child");ViewMap.showLoading(!1)},error:function(n,t,i){let r=AppCommon.getMessageErrorReuqest(n,i);console.log(r);ViewMap.showLoading(!1)}})}};